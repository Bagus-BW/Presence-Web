<template>
  <div>
    <label
      class="flex text-spacecadet-100 text-sm gap-1"
      :for="id"
    >
      {{ label }}
      <span
        v-if="required"
        class="text-red-500"
      >*</span>
    </label>
    <div class="flex items-center relative">
      <input
        :id="id"
        v-model="dateValue"
        type="date"
        class="date appearance-none border border-celadon-40 rounded-md w-full py-2 px-3 text-spacecadet-100 leading-tight focus:outline-none focus:shadow-outline"
        :class="[
          inputClass,
          {
            'bg-gray-200 cursor-not-allowed': disabled,
            '!border-red-500': error
          }
        ]"
      >
      <div class="absolute right-0 pr-2">
        <svg
          width="32"
          height="32"
          viewBox="0 0 25 24"
          fill="none"
          xmlns="http://www.w3.org/2000/svg"
        >
          <rect
            opacity="0.4"
            x="3.5"
            y="19"
            width="18"
            height="4"
            rx="1"
            fill="#797F99"
          />
          <g opacity="0.4">
            <path
              d="M6.5 2C6.5 1.44772 6.94772 1 7.5 1C8.05228 1 8.5 1.44772 8.5 2V5C8.5 5.55228 8.05228 6 7.5 6C6.94772 6 6.5 5.55228 6.5 5V2Z"
              fill="#797F99"
            />
            <path
              d="M16.5 2C16.5 1.44772 16.9477 1 17.5 1C18.0523 1 18.5 1.44772 18.5 2V5C18.5 5.55228 18.0523 6 17.5 6C16.9477 6 16.5 5.55228 16.5 5V2Z"
              fill="#797F99"
            />
          </g>
          <path
            opacity="0.4"
            d="M12.486 17.6667C11.6748 17.6667 10.9709 17.5383 10.3741 17.2815C9.77739 17.0247 9.31585 16.6642 8.98951 16.2C8.66317 15.7259 8.5 15.1728 8.5 14.5407C8.5 13.9086 8.65851 13.3753 8.97552 12.9407C9.29254 12.5062 9.74942 12.1753 10.3462 11.9481C10.9429 11.721 11.6562 11.6074 12.486 11.6074C13.3159 11.6074 14.0291 11.721 14.6259 11.9481C15.2319 12.1753 15.6935 12.5111 16.0105 12.9556C16.3368 13.3901 16.5 13.9185 16.5 14.5407C16.5 15.1728 16.3322 15.7259 15.9965 16.2C15.6702 16.6642 15.204 17.0247 14.5979 17.2815C14.0012 17.5383 13.2972 17.6667 12.486 17.6667ZM12.486 16.1556C13.1573 16.1556 13.6888 16.0074 14.0804 15.7111C14.472 15.4148 14.6678 15.0049 14.6678 14.4815C14.6678 13.9679 14.472 13.563 14.0804 13.2667C13.6888 12.9704 13.1573 12.8222 12.486 12.8222C11.8147 12.8222 11.2879 12.9704 10.9056 13.2667C10.5233 13.563 10.3322 13.9679 10.3322 14.4815C10.3322 15.0049 10.5233 15.4148 10.9056 15.7111C11.2879 16.0074 11.8147 16.1556 12.486 16.1556ZM12.486 12.6148C11.7308 12.6148 11.0828 12.5111 10.542 12.3037C10.0012 12.0864 9.58159 11.7753 9.28322 11.3704C8.99417 10.9556 8.84965 10.4617 8.84965 9.88889C8.84965 9.2963 8.99883 8.78765 9.2972 8.36296C9.6049 7.92839 10.0338 7.59259 10.5839 7.35556C11.134 7.11852 11.7681 7 12.486 7C13.2133 7 13.852 7.11852 14.4021 7.35556C14.9522 7.59259 15.3811 7.92839 15.6888 8.36296C15.9965 8.78765 16.1503 9.2963 16.1503 9.88889C16.1503 10.4617 16.0012 10.9556 15.7028 11.3704C15.4138 11.7753 14.9942 12.0864 14.4441 12.3037C13.8939 12.5111 13.2413 12.6148 12.486 12.6148ZM12.486 11.4296C13.0641 11.4296 13.521 11.3012 13.8566 11.0444C14.1923 10.7778 14.3601 10.4222 14.3601 9.97778C14.3601 9.51358 14.1876 9.15309 13.8427 8.8963C13.4977 8.63951 13.0455 8.51111 12.486 8.51111C11.9266 8.51111 11.479 8.63951 11.1434 8.8963C10.8077 9.15309 10.6399 9.51358 10.6399 9.97778C10.6399 10.4222 10.803 10.7778 11.1294 11.0444C11.465 11.3012 11.9172 11.4296 12.486 11.4296Z"
            fill="#797F99"
          />
          <path
            d="M14.0804 15.7111C13.6888 16.0074 13.1573 16.1556 12.486 16.1556C11.8147 16.1556 11.2879 16.0074 10.9056 15.7111C10.5233 15.4148 10.3322 15.0049 10.3322 14.4815C10.3322 13.9679 10.5233 13.563 10.9056 13.2667C11.2879 12.9704 11.8147 12.8222 12.486 12.8222C13.1573 12.8222 13.6888 12.9704 14.0804 13.2667C14.472 13.563 14.6678 13.9679 14.6678 14.4815C14.6678 15.0049 14.472 15.4148 14.0804 15.7111Z"
            fill="#797F99"
          />
          <path
            d="M13.8566 11.0444C13.521 11.3012 13.0641 11.4296 12.486 11.4296C11.9172 11.4296 11.465 11.3012 11.1294 11.0444C10.803 10.7778 10.6399 10.4222 10.6399 9.97778C10.6399 9.51358 10.8077 9.15309 11.1434 8.8963C11.479 8.63951 11.9266 8.51111 12.486 8.51111C13.0455 8.51111 13.4977 8.63951 13.8427 8.8963C14.1876 9.15309 14.3601 9.51358 14.3601 9.97778C14.3601 10.4222 14.1923 10.7778 13.8566 11.0444Z"
            fill="#797F99"
          />
          <path
            fill-rule="evenodd"
            clip-rule="evenodd"
            d="M3.5 3H6.5V5C6.5 5.55228 6.94772 6 7.5 6C8.05228 6 8.5 5.55228 8.5 5V3H16.5V5C16.5 5.55228 16.9477 6 17.5 6C18.0523 6 18.5 5.55228 18.5 5V3H21.5C22.0523 3 22.5 3.44772 22.5 4V20C22.5 20.5523 22.0523 21 21.5 21H3.5C2.94772 21 2.5 20.5523 2.5 20V4C2.5 3.44772 2.94772 3 3.5 3ZM10.3741 17.2815C10.9709 17.5383 11.6748 17.6667 12.486 17.6667C13.2972 17.6667 14.0012 17.5383 14.5979 17.2815C15.204 17.0247 15.6702 16.6642 15.9965 16.2C16.3322 15.7259 16.5 15.1728 16.5 14.5407C16.5 13.9185 16.3368 13.3901 16.0105 12.9556C15.7471 12.5863 15.384 12.2921 14.9211 12.0728C15.2434 11.883 15.504 11.6489 15.7028 11.3704C16.0012 10.9556 16.1503 10.4617 16.1503 9.88889C16.1503 9.2963 15.9965 8.78765 15.6888 8.36296C15.3811 7.92839 14.9522 7.59259 14.4021 7.35556C13.852 7.11852 13.2133 7 12.486 7C11.7681 7 11.134 7.11852 10.5839 7.35556C10.0338 7.59259 9.6049 7.92839 9.2972 8.36296C8.99883 8.78765 8.84965 9.2963 8.84965 9.88889C8.84965 10.4617 8.99417 10.9556 9.28322 11.3704C9.48687 11.6468 9.74699 11.8794 10.0636 12.0684C9.60319 12.2867 9.2405 12.5775 8.97552 12.9407C8.65851 13.3753 8.5 13.9086 8.5 14.5407C8.5 15.1728 8.66317 15.7259 8.98951 16.2C9.31585 16.6642 9.77739 17.0247 10.3741 17.2815Z"
            fill="#797F99"
          />
        </svg>
      </div>
    </div>
  </div>
</template>

<script>
import { random } from 'lodash';
export default {
  props: {
    id: {
      type: String,
      default () {
        return 'input-' + random(1, 100);
      }
    },
    label: {
      type: String,
      default () {
        return ''
      }
    },
    required: {
    	type: Boolean,
    	default () {
    		return false
    	}
    },
    disabled: {
    	type: Boolean,
    	default () {
    		return false
    	}
    },
    error: {
    	type: String,
    	default () {
    		return ''
    	}
    },
    inputClass: {
    	type: String,
    	default () {
    		return ''
    	}
    },
    modelValue: {
      type: String,
      default () {
        return ''
      }
    }
  },
  data() {
    return {
      dateValue: ""
    }
  },
  watch: {
    dateValue(newVal) {
      this.$emit("update:modelValue", newVal)
    }
  },
}
</script>
<style scoped lang="postcss">
input[type="date"] {
  position: relative;
}

input[type="date"]::-webkit-calendar-picker-indicator {
  position: absolute;
  top: 0;
  right: 0;
  width: 100%;
  height: 100%;
  padding: 0;
  color: transparent;
  background: transparent;
  cursor: pointer;
}
</style>